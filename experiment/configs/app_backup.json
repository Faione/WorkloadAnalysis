{"annotations": {"list": [{"builtIn": 1, "datasource": {"type": "grafana", "uid": "-- Grafana --"}, "enable": true, "hide": true, "iconColor": "rgba(0, 211, 255, 1)", "name": "Annotations & Alerts", "type": "dashboard"}]}, "description": "Application Metrics from Envoy", "editable": true, "fiscalYearStartMonth": 0, "graphTooltip": 0, "id": 9, "links": [], "liveNow": false, "panels": [{"datasource": {"type": "prometheus", "uid": "master_prometheus"}, "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line", "fillOpacity": 0, "gradientMode": "none", "hideFrom": {"legend": false, "tooltip": false, "viz": false}, "lineInterpolation": "linear", "lineWidth": 1, "pointSize": 5, "scaleDistribution": {"type": "linear"}, "showPoints": "auto", "spanNulls": false, "stacking": {"group": "A", "mode": "none"}, "thresholdsStyle": {"mode": "off"}}, "mappings": [], "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "red", "value": 80}]}}, "overrides": []}, "gridPos": {"h": 8, "w": 24, "x": 0, "y": 0}, "id": 4, "options": {"legend": {"calcs": [], "displayMode": "list", "placement": "bottom", "showLegend": true}, "tooltip": {"mode": "single", "sort": "none"}}, "targets": [{"datasource": {"type": "prometheus", "uid": "master_prometheus"}, "editorMode": "code", "expr": "irate(envoy_redis_command_get_error[1m]) + irate(envoy_redis_command_set_error[1m])", "legendFormat": "app__qps_error", "range": true, "refId": "SHefG"}], "title": "QPS error", "type": "timeseries"}, {"collapsed": false, "gridPos": {"h": 1, "w": 24, "x": 0, "y": 8}, "id": 2, "panels": [], "title": "Redis_QoS", "type": "row"}, {"datasource": {"type": "prometheus", "uid": "master_prometheus"}, "description": "p99 Latence of set, get ops", "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line", "fillOpacity": 0, "gradientMode": "none", "hideFrom": {"legend": false, "tooltip": false, "viz": false}, "lineInterpolation": "linear", "lineWidth": 1, "pointSize": 5, "scaleDistribution": {"type": "linear"}, "showPoints": "auto", "spanNulls": false, "stacking": {"group": "A", "mode": "none"}, "thresholdsStyle": {"mode": "off"}}, "mappings": [], "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "red", "value": 80}]}}, "overrides": []}, "gridPos": {"h": 8, "w": 24, "x": 0, "y": 9}, "id": 1, "options": {"legend": {"calcs": [], "displayMode": "list", "placement": "bottom", "showLegend": true}, "tooltip": {"mode": "single", "sort": "none"}}, "targets": [{"datasource": {"type": "prometheus", "uid": "master_prometheus"}, "editorMode": "code", "expr": "irate(envoy_redis_command_get_total[$__interval])", "hide": false, "legendFormat": "app_redis_qos_qps_of_redis_get", "range": true, "refId": "DD581"}, {"datasource": {"type": "prometheus", "uid": "master_prometheus"}, "editorMode": "code", "expr": "irate(envoy_redis_command_set_total[$__interval])", "hide": false, "legendFormat": "app_redis_qos_qps_of_redis_set", "range": true, "refId": "E0SVh"}, {"datasource": {"type": "prometheus", "uid": "master_prometheus"}, "editorMode": "code", "expr": "irate(envoy_redis_command_get_total[$__interval]) + irate(envoy_redis_command_set_total[$__interval])", "legendFormat": "app_redis_qos_qps_of_redis_total", "range": true, "refId": "J0xsV"}], "title": "QPS of Redis", "type": "timeseries"}, {"datasource": {"type": "prometheus", "uid": "master_prometheus"}, "description": "p99 Latence of set, get ops", "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line", "fillOpacity": 0, "gradientMode": "none", "hideFrom": {"legend": false, "tooltip": false, "viz": false}, "lineInterpolation": "linear", "lineWidth": 1, "pointSize": 5, "scaleDistribution": {"type": "linear"}, "showPoints": "auto", "spanNulls": false, "stacking": {"group": "A", "mode": "none"}, "thresholdsStyle": {"mode": "off"}}, "mappings": [], "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "red", "value": 80}]}}, "overrides": []}, "gridPos": {"h": 7, "w": 24, "x": 0, "y": 17}, "id": 3, "options": {"legend": {"calcs": [], "displayMode": "list", "placement": "bottom", "showLegend": true}, "tooltip": {"mode": "single", "sort": "none"}}, "targets": [{"datasource": {"type": "prometheus", "uid": "master_prometheus"}, "editorMode": "code", "expr": "histogram_quantile(0.99, sum by(le) (irate(envoy_redis_command_set_latency_bucket[$__interval]))) / 1000", "legendFormat": "app_redis_qos_p99_latency_set", "range": true, "refId": "s4SaB"}, {"datasource": {"type": "prometheus", "uid": "master_prometheus"}, "editorMode": "code", "expr": "histogram_quantile(0.99, sum by(le) (irate(envoy_redis_command_get_latency_bucket[$__interval]))) / 1000", "hide": false, "legendFormat": "app_redis_qos_p99_latency_get", "range": true, "refId": "yfsLK"}], "title": "p99 Latency", "type": "timeseries"}], "refresh": "5s", "schemaVersion": 38, "style": "dark", "tags": [], "templating": {"list": []}, "time": {"from": "now-5m", "to": "now"}, "timepicker": {}, "timezone": "", "title": "app", "uid": "app", "version": 1, "weekStart": ""}